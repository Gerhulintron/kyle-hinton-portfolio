<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Kyle Hinton Projects</title>
    <link rel="stylesheet" href="styles/SimStyle.css">
    <link rel="stylesheet" href="styles/KHPNavStyle.css"/>
</head>
<body>
    <div id="navbar-container"></div>
        <div class="body-container">
            <div class="development-outer-container" id="development-outer-container">
                <h1>Development</h1>
                <div class="development-portfolio-container">
                </div>
            </div>
            <div class="web-design-outer-container" id="web-design-outer-container">
                <h1>Web Design</h1>
                <div class="web-design-grid-container">
                </div>
            </div>

            <div class="creative-outer-container" id="creative-outer-container">
                <h1>Creative</h1>
                <div class="creative-grid-container">
                </div>
            </div>
        </div>

    <script>

        fetch('data/KyleHintonPortfolio.json')
            .then(response => {
                if (!response.ok) {
                    throw new Error("Network response was not ok");
                }
                return response.json();
            })
            .then(data => {
                displayProjects(data, '.development-portfolio-container', 'Development');
                displayProjects(data, '.creative-grid-container', 'Creative');
                displayProjects(data, '.web-design-grid-container', 'Web Design');

            })
            .catch(error => {
                console.error("There has been a problem with your fetch operation", error);
            });

        fetch("pages/KyleHintonProjectsNavbar.html")
            .then(response => response.text())
            .then(data => {
                document.getElementById('navbar-container').innerHTML = data;
            });

        function displayProjects(data, containerClassName, projectType) {
            const portfolioContainer = document.querySelector(containerClassName);

            if (portfolioContainer) {
                const projectHTML = data['kyle-hinton-projects'].map(project => {
                    if(project['project-type'] == projectType) {
                        return createProjectHTML(project);
                    }
                }).join('');

                portfolioContainer.innerHTML = projectHTML;

                attachEventListeners();
            }
        }

        function attachEventListeners() {
            document.querySelectorAll('.project-item').forEach(item => {
                item.addEventListener('mousemove', (e) => {
                    const rect = item.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    // Invert the direction by negating the dx and dy values
                    const dx = -(x - rect.width / 2) / 10;
                    const dy = -(y - rect.height / 2) / 10;
                    const boxShadow = `${dx}px ${dy}px 2px gold`;
                    item.style.boxShadow = boxShadow;
                });

                item.addEventListener('mouseleave', () => {
                    item.style.boxShadow = 'none';
                });
            });
        }

        function createProjectHTML(project) {
            let portfolioHTML = `<div class="project-item">`;
            let imageHTML = '';
            let descriptionHTML = '<div class="project-image-description-container">';


            if (project['project-title']) {
                portfolioHTML += `<div class="project-title-container"><h1 class="project-title">${project['project-title']}</h1></div>`;
            }


            // Check if 'project-feature-photo' exists
            if (project['project-feature-photo-link']) {
                descriptionHTML += `<div class="project-image-container">
             <img class="project-feature-photo" src="${project['project-feature-photo-link']}" alt="${project['project-title']}">
                     </div>`;
            }

            // Check if 'project-title' exists

            // Check if 'project-description' exists
            if (project['project-description']) {

                descriptionHTML += `<div class="outer-description-container"><div class="project-description-container"><p>${project['project-description']}</p></div>`;
            }
            else{
                descriptionHTML += `<div class="outer-description-container"><div class="project-description-container"><p>No description at this time.</p></div>`;

            }



            if (project['project-date']) {
                descriptionHTML += `<div class="project-date">
                              <p>${project['project-date']}</p>
                          </div>`;
            }

            // Add other project details directly to portfolioHTML
            if (project['project-mediums']) {
                descriptionHTML += `<div class="project-mediums">
                              <p>${project['project-mediums']}</p>
                          </div>`;
            }

            if (project['project-technology']) {
                descriptionHTML += `<div class="technology-languages">
                              <p>${project['project-technology']}</p>
                          </div>`;
            }

            if (project['project-presenter-producer']) {
                descriptionHTML += `<div class="project-presenter-producer">
                              <p>${project['project-presenter-producer']}</p>
                          </div>`;
            }



            const linksHTML = project['project-links'].map(link => {
                // Check if both 'project-link' and 'link-name' exist and are not empty
                if (link['project-link'] && link['link-name']) {
                    return `<li class="project-link"><a href="${link['project-link']}" target="_blank">${link['link-name']}</a></li>`;
                }
                return ''; // Return an empty string for invalid or incomplete links
            }).join(' ');

// Add the links HTML only if it's not empty
            if (linksHTML.trim().length > 0) {
                descriptionHTML += `<div class="project-links"><h3>Project Links:</h3><ul class="project-link-list">${linksHTML}</ul></div>`;

            }
                descriptionHTML += `</div></div>`; // Close the description div
                // descriptionHTML += imageHTML + descriptionHTML; // Close the description div
                portfolioHTML += descriptionHTML; // Combine the image and description HTML

            portfolioHTML += `</div>`; // Close the project item div

            return portfolioHTML;
        }


    </script>
</body>
</html>